# The following patch(es) are by geek1011

Show all games:
  - Enabled: no
  - Description: Shows all games in beta features.
  - FindZlib: "#boggleContainer[qApp_deviceIsPika=true]"
  - ReplaceZlib: {Find: "qproperty-visible: false;", Replace: "qproperty-visible: true;"}

Remove forgot pin button from lock screen:
  - Enabled: no
  - Description: |
      Removes the Forgot PIN -> Sign Out button from the lock screen.
      If this is enabled and you forget your pin, you will need to
      hard reset your Kobo.
  - FindZlib: "#lblSignout"
  - ReplaceZlib:
      Find: "#lblSignout {\n  text-decoration: underline;\n  font-family: Georgia;\n  font-style: italic;\n}"
      Replace: "#lblForgotPin,#lblSignout{qproperty-visible:false;}"

Change pop-up footnote font-family:
  - Enabled: no
  - Description: |
      This patch allows you to change the font-family for the kepub pop-up footnotes (it
      will also affect a few other dialogs, like no wifi, marked as finished, marked as
      unread, etc).
  # In ReadingController::showFootnoteDialog(Bookmark const&), a ConfirmationDialog is created.
  # This changes the styles for ConfirmationDialog > #text
  - FindZlib: "#ConfirmationDialog[isSansSerifDialog=true]"
  - ReplaceZlibGroup:
      Replacements:
      # change the replacement fonts to whatever you want
      - Find: "font-family: Avenir;"
        Replace: "font-family: Georgia;"
      - Find: "font-family: Sans-SerifJP, sans-serif;"
        Replace: "font-family: Georgia;"

Increase size of kepub chapter progress chart:
  - Enabled: no
  - Description: Originally by oren64, rewritten for 4.16.13337 by geek1011.
  - FindZlib: "#chapterSizes"
  - ReplaceZlibGroup:
      Replacements:
      # Top padding is aready set to 15px, 25px, 33px, vertical aligned to middle.
      # Progress chart bar sizes:
      - Find:    "#chapterSizes[qApp_deviceIsTrilogy=true] {\n  max-height: 56px;\n  min-height: 56px;\n}"
        Replace: "#chapterSizes[qApp_deviceIsTrilogy=true] {\n  max-height: 90px;\n  min-height: 90px;\n  min-width: 385px;\n  max-width: 385px;\n}"
      - Find:    "#chapterSizes[qApp_deviceIsPhoenix=true] {\n  max-height: 70px;\n  min-height: 70px;\n}"
        Replace: "#chapterSizes[qApp_deviceIsPhoenix=true] {\n  max-height: 130px;\n  min-height: 130px;\n  min-width: 495px;\n  max-width: 495px;\n}"
      - Find:    "#chapterSizes[qApp_deviceIsDragon=true] {\n  max-height: 100px;\n  min-height: 100px;\n}"
        Replace: "#chapterSizes[qApp_deviceIsDragon=true] {\n  max-height: 170px;\n  min-height: 170px;\n  min-width: 678px;\n  max-width: 678px;\n}"
      - Find:    "#chapterSizes[qApp_deviceIsDaylight=true] {\n  max-height: 130px;\n  min-height: 130px;\n}"
        Replace: "#chapterSizes[qApp_deviceIsDaylight=true] {\n  max-height: 215px;\n  min-height: 215px;\n  min-width: 865px;\n  max-width: 865px;\n}"

# The following patch(es) are ported from GeoffR's patch zips

Reduce top/bottom page spacer:
  - Enabled: no
  - Description: |
      Reduces the blank space that remains at the top/bottom of the page when
      the "Show title" / "Show footer" reading settings options are unticked.
      Spacer height is halved, customise by changing the min-height + max-height
      values in the Replace lines below. Affects both ePub and KePub books. This
      patch probably doesn't have an effect on the new reader introduced in 4.16.13337.
  - FindZlib: "MediumVertSpacer"
  - ReplaceZlibGroup:
      Replacements:
      # Touch/Mini: 24px --> 12px
      - Find: "MediumVertSpacer[qApp_deviceIsTrilogy=true] {\n  min-height: 24px;\n  max-height: 24px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsTrilogy=true] {\n  min-height: 12px;\n  max-height: 12px;\n}"
      # Glo/Aura/Aura2ed: 32px --> 16px
      - Find: "MediumVertSpacer[qApp_deviceIsPhoenix=true] {\n  min-height: 32px;\n  max-height: 32px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsPhoenix=true] {\n  min-height: 16px;\n  max-height: 16px;\n}"
      # AuraHD/H2O/GloHD/ClaraHD: 44px --> 22px
      - Find: "MediumVertSpacer[qApp_deviceIsDragon=true] {\n  min-height: 44px;\n  max-height: 44px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsDragon=true] {\n  min-height: 22px;\n  max-height: 22px;\n}"
      # AuraOne/Forma: 56px --> 28px
      - Find: "MediumVertSpacer[qApp_deviceIsDaylight=true] {\n  min-height: 56px;\n  max-height: 56px;\n}"
        Replace: "MediumVertSpacer[qApp_deviceIsDaylight=true] {\n  min-height: 28px;\n  max-height: 28px;\n}"

Custom synopsis details line spacing:
  - Enabled: no
  - Description: Sets the line spacing for the book's synopsis and details library view.
  - FindZlib: "body[qApp_deviceIsTrilogy=true] {\n  line-height: 1.45em;"
  - ReplaceZlibGroup:
      Replacements:
      - {Find: "line-height: 1.4em;", Replace: "line-height: 1.3em;"} # Glo/Aura/Aura2E (Phoenix)
      - {Find: "line-height: 1.35em;", Replace: "line-height: 1.30em;"} # AuraHD/H2O/GloHD/ClaraHD (Dragon), AuraOne (Daylight)
      - {Find: "line-height: 1.45em;", Replace: "line-height: 1.35em;"} # Touch/Mini (Trilogy)

Custom synopsis font size:
  - Enabled: no
  - Description: Increase synopsis font size
  - FindZlib: "body[qApp_deviceIsTrilogy=true] {\n  font-size: 19px;"
  - ReplaceZlibGroup:
      Replacements:
      - {Find: "font-size: 19px;", Replace: "font-size: 20px;"} # Touch/Mini (Trilogy)
      - {Find: "font-size: 23px;", Replace: "font-size: 25px;"} # Glo/Aura/Aura2E (Phoenix)
      - {Find: "font-size: 32px;", Replace: "font-size: 35px;"} # Glo HD, Clara HD
      - {Find: "font-size: 37px;", Replace: "font-size: 40px;"} # Aura ONE
      - {Find: "font-size: 29px;", Replace: "font-size: 32px;"} # Aura HD/H2O

New home screen increasing cover size:
  - Enabled: no
  - PatchGroup: Home screen layout tweaks
  - Description: Reduces the home screen margins, allowing larger cover images.
    # Needs a whole block to uniquely identify the zlib stream.
  - FindZlib: "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 26;\n  qproperty-rightMargin: 26;\n  qproperty-topMargin: 96;\n  qproperty-bottomMargin: 26;\n  qproperty-spacing: 10;\n}"
  - ReplaceZlibGroup:
      Replacements:
      - {Find: "qproperty-leftMargin: 26;", Replace: "qproperty-leftMargin: 10;"}
      - {Find: "qproperty-rightMargin: 26;", Replace: "qproperty-rightMargin: 10;"}
      - {Find: "qproperty-leftMargin: 36;", Replace: "qproperty-leftMargin: 12;"}
      - {Find: "qproperty-rightMargin: 36;", Replace: "qproperty-rightMargin: 12;"}
      - {Find: "qproperty-leftMargin: 50;", Replace: "qproperty-leftMargin: 16;"}
      - {Find: "qproperty-rightMargin: 50;", Replace: "qproperty-rightMargin: 16;"}
      - {Find: "qproperty-leftMargin: 65;", Replace: "qproperty-leftMargin: 20;"}
      - {Find: "qproperty-rightMargin: 65;", Replace: "qproperty-rightMargin: 20;"}

# The following patch(es) are ported from jackie_w's patches

Dictionary pop-up - increase available text area:
  - Enabled: no
  - Description: |
      Increase the area available for dictionary definitions in the dictionary pop-up
      by reducing some of the excess whitespace used (header, margins).
      This patch was formerly known as 'Dictionary pop-up frame size increase', but in
      fw 4.10.11591, Kobo removed access to the code which specifies pop-up frame size
      fw 4.12.12111, Kobo removed access to the code which could reduce footer size
  - FindZlib: "#settings {\n  background-color: #d9d9d9"
  - ReplaceZlibGroup:
      Replacements:
        # #dictionary: reduce top/left margins
        # Touch/Mini
        - Find:    "#dictionary[qApp_deviceIsTrilogy=true] {\n  margin-top: 20px;\n  margin-left: 10px;\n}"
          Replace: "#dictionary[qApp_deviceIsTrilogy=true] {\n  margin-top: 5px;\n  margin-left: 5px;\n}"
        # Glo/Aura/Aura2E  
        - Find:    "#dictionary[qApp_deviceIsPhoenix=true] {\n  margin-top: 20px;\n  margin-left: 20px;\n}"
          Replace: "#dictionary[qApp_deviceIsPhoenix=true] {\n  margin-top: 7px;\n  margin-left: 10px;\n}"
        # AuraHD/H2O/GloHD/ClaraHD
        - Find:    "#dictionary[qApp_deviceIsDragon=true] {\n  margin-top: 30px;\n  margin-left: 30px;\n}"
          Replace: "#dictionary[qApp_deviceIsDragon=true] {\n  margin-top: 10px;\n  margin-left: 15px;\n}"
        # AuraOne/Forma  
        - Find:    "#dictionary[qApp_deviceIsDaylight=true] {\n  margin-top: 42px;\n  margin-left: 42px;\n}"
          Replace: "#dictionary[qApp_deviceIsDaylight=true] {\n  margin-top: 14px;\n  margin-left: 20px;\n}"
        #
        # #header: reduce header height
        # AuraHD/H2O/GloHD/ClaraHD
        - Find:    "#header[qApp_deviceIsDragon=true] {\n  max-height: 90px;\n  min-height: 90px;\n}"
          Replace: "#header[qApp_deviceIsDragon=true] {\n  max-height: 70px;\n  min-height: 70px;\n}"
        # AuraOne/Forma  
        - Find:    "#header[qApp_deviceIsDaylight=true] {\n  max-height: 120px;\n  min-height: 120px;\n}"
          Replace: "#header[qApp_deviceIsDaylight=true] {\n  max-height: 90px;\n  min-height: 90px;\n}"
        #
        # #mainContainer: zero left margin, reduce right margin
        # Touch/Mini
        - Find:    "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 12px;\n  qproperty-rightMargin: 12px;\n}"
          Replace: "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 0px;\n  qproperty-rightMargin: 6px;\n}"
        # Glo/Aura/Aura2E  
        - Find:    "#mainContainer[qApp_deviceIsPhoenix=true] {\n  qproperty-leftMargin: 16px;\n  qproperty-rightMargin: 16px;\n}"
          Replace: "#mainContainer[qApp_deviceIsPhoenix=true] {\n  qproperty-leftMargin: 0px;\n  qproperty-rightMargin: 8px;\n}"
        # AuraHD/H2O/GloHD/ClaraHD
        - Find:    "#mainContainer[qApp_deviceIsDragon=true] {\n  qproperty-leftMargin: 22px;\n  qproperty-rightMargin: 22px;\n}"
          Replace: "#mainContainer[qApp_deviceIsDragon=true] {\n  qproperty-leftMargin: 0px;\n  qproperty-rightMargin: 11px;\n}"
        # AuraOne/Forma  
        - Find:    "#mainContainer[qApp_deviceIsDaylight=true] {\n  qproperty-leftMargin: 28px;\n  qproperty-rightMargin: 28px;\n}"
          Replace: "#mainContainer[qApp_deviceIsDaylight=true] {\n  qproperty-leftMargin: 0px;\n  qproperty-rightMargin: 14px;\n}"

Increase Book Details synopsis area:
  - Enabled: no
  - Description: |
      Book details page
      - Increase height of bottom half (Synopsis) by 
        decreasing height of top half (Cover, Title, Author, Series)
      - See https://www.mobileread.com/forums/showpost.php?p=3311354&postcount=134
      - fw 4.12/4.16 - rewritten by jackie_w to replace oren64's patch
  - FindZlib: "#bookInfoWidget"
  - ReplaceZlibGroup:
      Replacements:
        #   Portrait mode:  #bookInfoWidget[isLandscape=false]: 
        - {Find: "height: 300px;", Replace: "height: 200px;"} #Touch/Mini
        - {Find: "height: 390px;", Replace: "height: 230px;"} #Glo/Aura/Aura2
        - {Find: "height: 550px;", Replace: "height: 370px;"} #AuraHD/H2O/H2O2/GloHD/ClaraHD
        - {Find: "height: 642px;", Replace: "height: 425px;"} #LibraH2O (*untested)
        - {Find: "height: 715px;", Replace: "height: 500px;"} #AuraOne/Forma
        #   Landscape mode:  #bookInfoWidget[isLandscape=true]: 
        - {Find: "height: 210px;", Replace: "height: 200px;"} #Touch/Mini
        - {Find: "height: 265px;", Replace: "height: 230px;"} #Glo/Aura/Aura2
        - {Find: "height: 420px;", Replace: "height: 370px;"} #AuraHD/H2O/H2O2/GloHD/ClaraHD
        - {Find: "height: 490px;", Replace: "height: 425px;"} #LibraH2O (*untested)
        - {Find: "height: 540px;", Replace: "height: 500px;"} #AuraOne/Forma

Increase library cover size:
  - Enabled: no
  - Description: |
      Increase the cover thumbnail size in My Books main book list
      See screenshots - https://www.mobileread.com/forums/showpost.php?p=3241532&postcount=82
      N.B. Settings for LibraH2O are an initial guess. User testing required.
      fw 4.17 - rewritten by jackie_w to replace oren64's patch
  - FindZlib: "#coverPixmapView"
  - ReplaceZlibGroup:
      Replacements:
        # coverPixmapView increase cover thumbnail width/height:
        # Touch/Mini (Trilogy)
        - {Find: "width: 60px;",   Replace: "width: 85px;"}
        - {Find: "height: 90px;",  Replace: "height: 100px;"}
        # Glo/Aura/Aura2 (Phoenix)
        - {Find: "width: 70px;",   Replace: "width: 100px;"}
        - {Find: "height: 110px;", Replace: "height: 130px;"}
        # AuraHD/H2O/H2O2/GloHD/ClaraHD (Dragon)
        - {Find: "width: 108px;",  Replace: "width: 140px;"}
        - {Find: "height: 168px;", Replace: "height: 190px;"}
        # AuraOne/Forma (Daylight)
        - {Find: "width: 140px;",  Replace: "width: 190px;"}
        - {Find: "height: 218px;", Replace: "height: 255px;"}
        # LibraH2O (Storm) *untested*
        - {Find: "width: 126px;",  Replace: "width: 165px;"}
        - {Find: "height: 196px;", Replace: "height: 225px;"}

# The following patch(es) are ported from oren64's patches

Increase headlines font:
  - Enabled: no
  - Description: |
      Increase the font size in My books, Activity, Bookstore...
      See https://www.mobileread.com/forums/showpost.php?p=3520879&postcount=42
  - FindZlib: "#tabContainer > N3TabItem"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsTrilogy=true] {\n  font-size: 16px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsTrilogy=true] {\n  font-size: 28px;\n}"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsPhoenix=true] {\n  font-size: 20px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsPhoenix=true] {\n  font-size: 36px;\n}"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsDragon=true] {\n  font-size: 28px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsDragon=true] {\n  font-size: 42px;\n}"
  - ReplaceZlib:
      Find:    "#tabContainer > N3TabItem[qApp_deviceIsDaylight=true] {\n  font-size: 36px;\n}"
      Replace: "#tabContainer > N3TabItem[qApp_deviceIsDaylight=true] {\n  font-size: 50px;\n}"

New home screen subtitle custom font:
  - Enabled: no
  - Description: |
      Increase subtitle font size, font color black. Works best when used
      with with patch `New home screen increasing cover size`
  - FindZlib: "MetaDataLabel {\n  color: #666666;\n  qproperty-indent: 0;\n}"
  - ReplaceZlib: {Find: "MetaDataLabel {\n  color: #666666;\n  qproperty-indent: 0;\n}", Replace: "MetaDataLabel {\n  color: #000000;\n  qproperty-indent: 0;\n}"}
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsTrilogy=true] {\n  font-size: 13px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsTrilogy=true] {\n  font-size: 14px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsPhoenix=true] {\n  font-size: 17px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsPhoenix=true] {\n  font-size: 18px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsDragon=true] {\n  font-size: 24px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsDragon=true] {\n  font-size: 26px;\n}"
  - ReplaceZlib:
      Find:    "MetaDataLabel[qApp_deviceIsDaylight=true] {\n  font-size: 31px;\n}"
      Replace: "MetaDataLabel[qApp_deviceIsDaylight=true] {\n  font-size: 34px;\n}"

Remove footer (row3) and increase cover size on new home screen:
  - Enabled: no
  - PatchGroup: Home screen layout tweaks
  - FindZlib: "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 26;"
  - ReplaceZlibGroup:
      Replacements:
        - Find:    "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 26;\n  qproperty-rightMargin: 26;\n  qproperty-topMargin: 96;\n  qproperty-bottomMargin: 26;\n  qproperty-spacing: 10;\n}"
          Replace: "#mainContainer[qApp_deviceIsTrilogy=true] {\n  qproperty-leftMargin: 10;\n  qproperty-rightMargin: 10;\n  qproperty-topMargin: 96;\n  qproperty-bottomMargin: 26;\n  qproperty-spacing: 10;\n}"
        - Find:    "#mainContainer[qApp_deviceIsPhoenix=true] {\n  qproperty-leftMargin: 36;\n  qproperty-rightMargin: 36;\n  qproperty-topMargin: 126;\n  qproperty-bottomMargin: 36;\n  qproperty-spacing: 14;\n}"
          Replace: "#mainContainer[qApp_deviceIsPhoenix=true] {\n  qproperty-leftMargin: 12;\n  qproperty-rightMargin: 12;\n  qproperty-topMargin: 126;\n  qproperty-bottomMargin: 36;\n  qproperty-spacing: 14;\n}"
        - Find:    "#mainContainer[qApp_deviceIsDragon=true] {\n  qproperty-leftMargin: 50;\n  qproperty-rightMargin: 50;\n  qproperty-topMargin: 170;\n  qproperty-bottomMargin: 50;\n  qproperty-spacing: 20;\n}"
          Replace: "#mainContainer[qApp_deviceIsDragon=true] {\n  qproperty-leftMargin: 16;\n  qproperty-rightMargin: 16;\n  qproperty-topMargin: 170;\n  qproperty-bottomMargin: 50;\n  qproperty-spacing: 20;\n}"
        - Find:    "#mainContainer[qApp_deviceIsDaylight=true] {\n  qproperty-leftMargin: 65;\n  qproperty-rightMargin: 65;\n  qproperty-topMargin: 220;\n  qproperty-bottomMargin: 65;\n  qproperty-spacing: 26;\n}"
          Replace: "#mainContainer[qApp_deviceIsDaylight=true] {\n  qproperty-leftMargin: 20;\n  qproperty-rightMargin: 20;\n  qproperty-topMargin: 220;\n  qproperty-bottomMargin: 65;\n  qproperty-spacing: 26;\n}"
        # Note: this shouldn't conflict with the below patch, as the original row1col2 rule is kept intact, and there's no harm in duplicate rules.
        - Find:    "#row1col2 {\n  qproperty-visible: false;\n}"
          Replace: "#row1col2 {\n  qproperty-visible: false;\n}\n#row3 {\n  qproperty-visible: false;\n}"

Remove footer (row3) on new home screen:
  - Enabled: no
  - PatchGroup: Home screen visibility tweaks
  - FindZlib: "#row1col2"
  - ReplaceZlib:
      Find:    "#row1col2 {\n  qproperty-visible: false;\n}"
      Replace: "#row1col2 {\n  qproperty-visible: false;\n}\n#row3 {\n  qproperty-visible: false;\n}"

