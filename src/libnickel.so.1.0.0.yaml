# The following patch(es) are by geek1011

Rename new home screen footer:
  - Enabled: no
  - FindReplaceString: {Find: "Find your next great read", Replace: "Find your next great read"}
  - FindReplaceString: {Find: "Buy, borrow, or preview books", Replace: "Buy, borrow, or preview books"}
  - FindReplaceString: {Find: "Find your next book in Kobo Plus or our store", Replace: "Find your next book in Kobo Plus or our store"}
    # You can enable the following replacement, but note that it might cause the o letter on the keyboard to change
#  - FindReplaceString: {Find: "Shop Kobo", Replace: "9char-str"}

Both page turn buttons go next: # TODO17:TEST (make sure this works and turns in the right direction)
  - Enabled: no
  - Description: Make both page turn buttons on the Forma go next in the reader.
  # In ReadingView::keyPressEvent(QKeyEvent*):
  # force the possible branch to next page, never fall through to prev page.
  - ReplaceBytes: {Offset: 0xA30504, FindH: 28 B9, ReplaceH: 05 E0} # CBNZ R0, #0xE -> B #0xE

Both page turn sides go next:
  - Enabled: no
  - Description: Make both page turn sides go next in the reader.
  # In ReadingView::processTap(TapGesture*):
  # nop the branch for checking if left-to-right (so it always runs the swap of back/forward)
  - ReplaceBytesNOP: {Offset: 0xA380B8, FindH: 18 B9}
  # where r3 = *(r7+0x8) (back) and r2 = *(r7+0x14) (forward), then they are stored in reverse,
  # instead of storing each one, just store forward (by changing the source register in the str
  # instruction)
  - ReplaceBytes: {Offset: 0xA380BE, FindH: 7B 61, ReplaceH: 7A 61}
  # This patch could have also been done later on where the tap point is checked against different
  # QRects, but that's a lot more complicated due to the use of QHash s of pointers to functions.

Replace adobe page numbers toggle with invert screen:
  - Enabled: no
  - Description: |
      Replaces the adobe page numbers toggle in reading settings with an invert
      screen one.
  # in a subroutine of N3SettingsReadingView::setupUi(Widget) (found backwards from FeatureSettings::getShowAdobePageNumbers()):
  # change ReadingSettings::getShowAdobePageNumbers() to FeatureSettings::invertScreen()
  - ReplaceBLX: {Offset: 0x88A5F0, Find: 0x42FC50, Replace: 0x43B794}
  # in N3SettingsReadingController::showAdobePageNumbersToggled():
  # change ReadingSettings::getShowAdobePageNumbers() to FeatureSettings::invertScreen()
  - ReplaceBLX: {Offset: 0x88621A, Find: 0x42FC50, Replace: 0x43B794}
  # and ReadingSettings::setShowAdobePageNumbers(bool) to FeatureSettings::setInvertScreen(bool)
  - ReplaceBLX: {Offset: 0x886226, Find: 0x43517C, Replace: 0x43AEEC}
  # then change the text in the settings page
  - FindReplaceString: {Find: "Show Adobe EPUB page numbers", Replace: "Invert screen"}

Always show confirmation dialog before upgrading:
  - Enabled: no
  - Description: This patch makes the confirmation dialog always show before upgrading.
  # In UpgradeManager::requestUpgradeConfirmation(UpgradeType, QString const&):
  # replace the check for if UpgradeType is optional to be always true (CMP r4, r4)
  - ReplaceBytes: {Offset: 0xB2FEE2, FindH: 01 2C, ReplaceH: A4 42}
  # and replace the call to UpgradeManager::isSilent to be always false (MOV r0, #0x0)
  - ReplaceBytes: {Offset: 0xB2FEF6, FindBLX: 0x435A50, ReplaceH: 4F F0 00 00}

Hide browser from beta features:
  - Enabled: no
  - Description: Hides the built-in browser from beta features.
  # In N3SettingsExtrasView::N3ExtrasView(QWidget*):
  # hide the browser by skipping over branch to skip hiding it
  - ReplaceBytesNOP: {Offset: 0xACC39E, FindH: 18 B1}
  # In SelectionSearchMenuController::createMenus():
  # always hide the browser search:
  - ReplaceBytes: {Offset: 0x9EBE2A, FindBLX: 0x43AC9C, ReplaceH: 4F F0 00 00}

Remove beta features not supported text:
  - Enabled: no
  - Description: Does what it says to clear up the clutter.
  # In Ui_N3SettingsExtrasView::retranslateUi(QWidget*):
  # instead of setting the QLabel::setText(QString const&), QWidget::hide()
  - ReplaceBLX: {Offset: 0xACC8EC, Find: 0x42A3B4, Replace: 0x427A38}

Disable all tutorial dialogs:
  - Enabled: no
  - Description: |
      Removes the annoying tutorials (and recurring dialogs). Note - I may
      have missed a few of them. If I have, just open an issue on GitHub or
      PM me (geek1011) on MobileRead, and I'll fix it.
  # 0x4218BC is the offset of QVariant::toBool, which is called after getting
  # the setting (of if it has/should show) as a QVariant. I am replacing this
  # method as opposed to replacing the return value of the function for 1. A
  # MOV instruction with an immediate (fixed) value is 4 long (rather than 2)
  # and 2. This is simpler to update as I only need to update the function
  # offset and the offset for each setting.
  - ReplaceBytesAtSymbol: {Symbol: "DialogSettings::firstPurchaseCreditJitShown()",         Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "DialogSettings::quickTurnDialogShown()",                Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::koboLoveDialogShown()",            Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::quickTourWidgetShown()",           Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::overDriveFilterShown()",           Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::wifiReminderDialogShown()",        Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::readABookShown()",                 Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::borrowDialogShown()",              Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::quickTourShown()",                 Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::libraryFTEShown()",                Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::zoomFTEShown()",                   Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::welcomeShown()",                   Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::koboPlusPromoShown()",             Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::syncWarningDialogShown()",         Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::addedToMyWordsDialogShown()",      Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::longPressDialogShown()",           Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::swipeDialogShown()",               Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::syncReminderDialogShown()",        Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::eReaderBooksManagementFTEShown()", Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}
  - ReplaceBytesAtSymbol: {Symbol: "ApplicationSettings::libraryCuratedListsDialogShown()", Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}

Set visible SmartLink:
  - Enabled: no
  - PatchGroup: SmartLink
  - Description: Sets the currently visible smartlink (does not override priority messages).
  # SmartLinks: (name from SmartLinkWidget::getAnalyticsMessage)
  #  # - internal name   - default condition                                   - what                                                             - action
  # PRIORITY MESSAGES (shown first up to 3 times each): (SmartLinkWidget::showPriorityMessage, ActivityManager::smartLinkPriorityMessage, SmartLinkWidget::tapped)
  #  5 - ReleaseNotes    - whats new available from Activity                   - RELEASE NOTES: Find out what's new in this software update       - whats new (from Activity)
  #  6 - OverdriveFTE    - overdrive enabled && not signed in                  - OVERDRIVE: Learn how to borrow eBooks from your public library   - overdrive about
  #  7 - KoboPlusFTE     - kobo plus enabled && not subscribed                 - KOBO PLUS: Browse Kobo Plus books                                - kobo store -> kobo plus
  # ROTATION MESSAGES (randomly chosen): (SmartLinkWidget::showRotationMessage, ActivityManager::smartLinkGeneralMessage, SmartLinkWidget::tapped)
  #  1 - Pocket          - pocket not signed in                                - POCKET: Read articles from the web on your eReader               - pocket about
  #  2 - KoboPlus        - kobo plus enabled && not subscribed                 - KOBO PLUS: Get unlimited access to books in all genres           - kobo store -> kobo plus
  #  2 - KoboPlus        - kobo plus enabled && not subscribed                 - KOBO PLUS: Read as much as you want with a Kobo Plus subscription- kobo store -> kobo plus
  #  3 - Overdrive       - overdrive enabled && not signed in                  - OVERDRIVE: Borrow eBooks from your public library                - overdrive about
  #  4 - Categories      - always                                              - CATEGORIES: Browse fiction, romance, biography and more          - kobo store -> categories
  #  8 - NaturalLight    - has light sensor && not viewed tutorial             - DEVICE NAME: Learn about the Natural Light feature               - rgb front light about
  #  9 - QuickTour       - quick tour not shown && quick turn tile not visible - GETTING STARTED: Get to know your %0                             - quick tour
  # 10 - ReadingTour     - read a book tour not showed                         - READING A BOOK: Get quick tips about reading on your eReader     - read a book tutorial
  # 11 - UserGuide       - user guide present && not opened                    - USER GUIDE: Read the user guide for your %0                      - read -> user guide
  # 12 - RelatedReads    - recent book available from Activity                 - RELATED READS: Discover books related to the ones you're reading - browse -> similar books
  # 13 - Wishlist        - no wishlist items || something else                 - WISHLIST: Create a Wishlist of books you're interested in        - browse -> wishlist
  # 14 - ReadingSettings - reading settings not changed                        - READING SETTINGS: Customize the way you read a book              - settings -> reading settings
  # 15 - ReadingStats    - books finished > 0 && hours read rounded to .5 > 0  - READING STATS: You've finished %n books and read for %n hours    - reading life -> stats
  # 16 - SuperPoints     - participating in super points && points > 2400      - KOBO SUPER POINTS: You have %0 Super Points to redeem            - kobo store
  # 17 - PocketUser      - unread pocket articles > 0                          - POCKET: Catch up on the %n article(s) you added recently         - library -> pocket
  #
  # in SmartLinkWidget::showRotationMessage, which is the only caller of ActivityManager::smartLinkGeneralMessage:
  # change the result of the call to ActivityManager::smartLinkGeneralMessage:
  - ReplaceBytes: {Offset: 0x929948, FindBLX: 0x448D18, ReplaceH: 4F F0 04 00}
  # set the new SmartLink to show (you can set this to your preference based on the
  # previous list, but it MUST be one of the above options, or you may need to
  # factory reset):
  - ReplaceInt: {Offset: 0x92994A, Find: 4, Replace: 4}

Only show Pocket SmartLink:
  - Enabled: no
  - PatchGroup: SmartLink
  - Description: Only show the Pocket SmartLink on the home screen.
  # in SmartLinkWidget::showRotationMessage:
  # change the result of the call to ActivityManager::smartLinkGeneralMessage to 17 (0x11):
  - ReplaceBytes: {Offset: 0x929948, FindBLX: 0x448D18, ReplaceH: 4F F0 11 00}
  # replace the text:
  - FindReplaceString: {Find: "Catch up on the %n article(s) you added recently", Replace: "My Articles"}
# - FindReplaceString: {Find: "Catch up on the %n article(s) you added recently", Replace: "My Articles (%n unread)"}

Only show stats SmartLink:
  - Enabled: no
  - PatchGroup: SmartLink
  - Description: Only show the stats SmartLink on the home screen.
  # in SmartLinkWidget::showRotationMessage:
  # change the result of the call to ActivityManager::smartLinkGeneralMessage to 15 (0x0F):
  - ReplaceBytes: {Offset: 0x929948, FindBLX: 0x448D18, ReplaceH: 4F F0 0F 00}

Never show Kobo Plus, wishlist, and points SmartLinks:
  - Enabled: no
  - PatchGroup: SmartLink
  - Description: Removes Kobo Plus, wishlist, and points SmartLinks from the rotation.
  # in ActivityManager::smartLinkGeneralMessage(ActivityManager *this, const Device *a2):
  # Note: To update, first, update offsets of the smartlink vector append, then
  # find the one after putting the smartlink in r3.
  # NOP Kobo Plus (2):
  - ReplaceBytesNOP: {Offset: 0x5F161C, FindBLX: 0x425AA8}
  # NOP wishlist (13):
  - ReplaceBytesNOP: {Offset: 0x5F1602, FindBLX: 0x425AA8}
  # NOP super points (16):
  - ReplaceBytesNOP: {Offset: 0x5F1AEA, FindBLX: 0x425AA8}

# MISSING: Disable wishlist: it seems to cause some REALLY unusual side effects to do with touch events

Remove recommendations (row1col2) from home screen:
  - Enabled: no
  - Description: |
      By default, when there are less than 2 books open, a reccomendations
      column shows in the top right of the home screen. This patch hides it.
  # in HomePageView::configureTopRight(HomePageWidgets):
  # always hide top-right widget:
  - ReplaceBytesNOP: {Offset: 0x91F1E6, FindH: 58 B1}

Increase TOC level indentation:
  - Enabled: no
  - PatchGroup: TOC Indentation
  - Description: |
      The space indented Table of Contents levels are quite hard to see, as the
      difference is almost too small to easily notice.
  # Shift by 2 instead of 1 (multiply level by 4 instead of 2).
  - ReplaceBytes: {Offset: 0x8BE306, FindH: 42 00, ReplaceH: 82 00}

Increase TOC level indentation and fix extra indentation bug:
  - Enabled: no
  - PatchGroup: TOC Indentation
  - Description: |
      The space indented Table of Contents levels are quite hard to see, as the
      difference is almost too small to easily notice. In addition, this fixes
      the bug where all TOC entries are indented by 1 level extra.
  - BaseAddress: 0x8BE302
  # Clear out existing instructions with NOPs
  - ReplaceBytes: {Offset: 0, FindH: 07 F1 0C 0B, ReplaceH: 00 20 00 20} # put string address in fp
  - ReplaceBytes: {Offset: 4, FindH: 42 00, ReplaceH: 00 20}             # shift level by 1 (multiply by 2) into r2
  - ReplaceBytes: {Offset: 6, FindH: 4F F0 20 01, ReplaceH: 00 20 00 20} # set r1 to 0x20 (space char)
  - ReplaceBytes: {Offset: 10, FindH: 58 46, ReplaceH: 00 20}            # put fp in r0
  # Put new instructions
  - ReplaceBytes: {Offset: 0, FindH: 00 20, ReplaceH: 40 1E}             # decrease level by 1
  - ReplaceBytes: {Offset: 2, FindH: 00 20, ReplaceH: 82 00}             # shift level by 2 (multiply by 4) into r2
  - ReplaceBytes: {Offset: 4, FindH: 00 20, ReplaceH: 20 21}             # set r1 to 0x20 (space char)
  - ReplaceBytes: {Offset: 6, FindH: 00 20 00 20, ReplaceH: 07 F1 0C 0B} # put string address into fp
  - ReplaceBytes: {Offset: 10, FindH: 00 20, ReplaceH: 58 46}            # put fp in r0

Allow showing info panel on random screensaver:
  - Enabled: no
  - Description: |
      See https://www.mobileread.com/forums/showthread.php?t=321609. This patch
      allows showing the info panel even when using a random screensaver image
      from .kobo/screensaver (note that full-screen covers needs to be enabled
      for the screensaver to show).
  - ReplaceBytesNOP: {Offset: 0xA28228, FindBLX: 0x452DC4}

Remove title from reading header/footer:
  - Enabled: no
  - Description: Removes the chapter/book title from the new reading header/footer.
  # In the longest form of ReadingFooter::update (the others are wrappers with
  # the args being set to the current value), the first one is the title. The
  # final string is created by starting with the title, then appending the "-",
  # then the page number / percentage / etc text.
  #
  # This one is slightly unusual in that the reading header also shares the
  # ReadingFooter code (ReadingView::updateProgressHeader only has the page text,
  # and it ends with a branch to ReadingFooter::update). This means we only have
  # to patch one place, but it also means you can't have the title in one, but
  # not the other.
  #
  # We'll patch this in a slightly hacky and inefficient, but simple and easy-to-update
  # way by replacing the first QString::append (the dash) with a QString::resize
  # to zero (I would have done a QString::clear, but that symbol isn't imported):
  - ReplaceBytes: {Offset: 0xB6D00E, FindH: F9 68, ReplaceH: 00 21} # replace LDR r1, [...] with MOV r1, #0 (the LDR doesn't matter, but will need to be updated)
  - ReplaceBLX: {Offset: 0xB6D012, Find: 0x4503D8, Replace: 0x430DC8}

# The following patches allow you to enable a config file option with a patch.

FeatureSettings - BookSpecificStats:
  - Enabled: no
  - Description: Adds an option to view stats for a specific book to the book menu.
  - ReplaceBytesAtSymbol: {Symbol: "FeatureSettings::bookSpecificStatsEnabled()", Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}

FeatureSettings - ShowFacebookShare:
  - Enabled: no
  - Description: Re-enables the Facebook share option in menus.
  - ReplaceBytesAtSymbol: {Symbol: "FeatureSettings::showFacebookShare()", Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}

FeatureSettings - FullScreenBrowser:
  - Enabled: no
  - Description: Makes the browser fullscreen (note that there is no way out except for rebooting).
  - ReplaceBytesAtSymbol: {Symbol: "FeatureSettings::fullScreenBrowser()", Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}

FeatureSettings - MyWords:
  - Enabled: no
  - Description: Enables the My Words tab of the Activity screen.
  - ReplaceBytesAtSymbol: {Symbol: "FeatureSettings::myWords()", Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}

FeatureSettings - ExportHighlights:
  - Enabled: no
  - Description: Add an option to export highlights to the book menu.
  - ReplaceBytesAtSymbol: {Symbol: "FeatureSettings::exportHighlightsEnabled()", Offset: 53, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}

DeveloperSettings - AutoUsbGadget:
  - Enabled: no
  - Description: Automatically enable USB Storage mode when connected.
  - ReplaceBytes: {Offset: 0x685FFE, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}

DeveloperSettings - ForceAllowLandscape:
  - Enabled: no
  - Description: |
      Enables rotation on all devices. This shows a rotation icon in the status
      bar, which shows a menu allowing you to choose between portrait and landscape
      when pressed. This icon is only shown on rotateable views (like the reader).
  - ReplaceBytes: {Offset: 0x685F5E, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00}

PowerSettings - UnlockEnabled:
  - Enabled: no
  - Description: Disables/enables the slide to unlock feature.
  - ReplaceBytes: {Offset: 0x68F392, FindBLX: 0x4218BC, ReplaceH: 4F F0 00 00} # disable
# - ReplaceBytes: {Offset: 0x68F392, FindBLX: 0x4218BC, ReplaceH: 4F F0 01 00} # enable

# The following patch(es) were made by GeoffR, and most are updated by geek1011

# The next 2 patches are alternatives.
# Beware that the KePub reader has problems with its page break position
# when narrow line spacings are selected, depending on which font is used.
# You can increase the replace_float values at the bottom of each patch to
# avoid those problems, or else simply refrain from selecting narrowest
# line spacings when reading KePubs.

My 10 line spacing values:
  - Enabled: no
  - PatchGroup: Line spacing values alternatives
  - Description: |
      This patch changes the values on the line spacing adjustment slider,
      reducing the number of spacing options from 15 to 10, but allowing
      much narrower spacing values to be set.
    # Bypass code-constructed values 1.0, 1.2, 1.5, 2.0, 3.0
    # These are all the appends not loaded using adr.
  - ReplaceBytesNOP: {Offset: 0x693B2C, FindBLX: 0x43ABAC}
  - ReplaceBytesNOP: {Offset: 0x693B82, FindBLX: 0x43ABAC}
  - ReplaceBytesNOP: {Offset: 0x693BAC, FindBLX: 0x43ABAC}
  - ReplaceBytesNOP: {Offset: 0x693BE8, FindBLX: 0x43ABAC}
  - ReplaceBytesNOP: {Offset: 0x693C4E, FindBLX: 0x43ABAC}
    # 10 values for replacement, change these replace_float values to suit:
  - BaseAddress: 0x693CE8
  - ReplaceFloat: {Offset: 0x00,  Find: 1.05, Replace: 0.8}
  - ReplaceFloat: {Offset: 0x08,  Find: 1.07, Replace: 0.85}
  - ReplaceFloat: {Offset: 0x10,  Find: 1.1,  Replace: 0.875}
  - ReplaceFloat: {Offset: 0x18,  Find: 1.35, Replace: 0.9}
  - ReplaceFloat: {Offset: 0x20,  Find: 1.7,  Replace: 0.925}
  - ReplaceFloat: {Offset: 0x28,  Find: 1.8,  Replace: 0.95}
  - ReplaceFloat: {Offset: 0x30,  Find: 2.2,  Replace: 0.975}
  - ReplaceFloat: {Offset: 0x38,  Find: 2.4,  Replace: 1.0}
  - ReplaceFloat: {Offset: 0x40,  Find: 2.6,  Replace: 1.05}
  - ReplaceFloat: {Offset: 0x48,  Find: 2.8,  Replace: 1.1}

# Waiting (GeoffR): My 24 line spacing values # TODO17

Custom left & right margins:
  - Enabled: no
  - Description: |
      This patch sets the size of the margins added by the margins
      adjustment slider, as a percentage of screen width.
  - FindBaseAddressString: "\0\0\0\0\x02\0\0\0\x04\0\0\0\x06\0\0\0\x08\0\0\0\x0A\0\0\0\x0C\0\0\0\x0E\0\0\0\x10\0\0\0"
  # 9 values for replacement:
  - ReplaceInt: {Offset: 0x00, Find:  0, Replace: 0}
  - ReplaceInt: {Offset: 0x04, Find:  2, Replace: 1}
  - ReplaceInt: {Offset: 0x08, Find:  4, Replace: 2}
  - ReplaceInt: {Offset: 0x0C, Find:  6, Replace: 3}
  - ReplaceInt: {Offset: 0x10, Find:  8, Replace: 4}
  - ReplaceInt: {Offset: 0x14, Find: 10, Replace: 5}
  - ReplaceInt: {Offset: 0x18, Find: 12, Replace: 6}
  - ReplaceInt: {Offset: 0x1C, Find: 14, Replace: 7}
  - ReplaceInt: {Offset: 0x20, Find: 16, Replace: 8}

# Waiting (GeoffR): Custom font sizes # TODO17

Freedom to advanced fonts control:
  - Enabled: no
  - Description: |
      This patch allows the advanced font options (weight/sharpness adjustments)
      to work with sideloaded fonts too. (KEPUB - OTF and TTF. EPUB - TTF only.)
      Beware unknown side-effects for Japanese or Chinese language books.
    # The following passes a junk pointer to N3FontTypeUtil::setupDropdown, but it
    # seems the pointer is only passed on to ReadingSettings::getDefaultFontFamily
    # where the code is patched to avoid dereferencing it, so it should be safe.
    # BEWARE: What are the side-effects for Japanese / Chinese language books?
    #
    # N3FontTypeUtil.setupMonotypeDropdown(b,c)
    # --> N3FontTypeUtil.setupDropdown(UNDEFINED,b,c)
  - ReplaceBytes: {Offset: 0x8802BE, FindH: 59 46 50 46, ReplaceH: 5A 46 51 46}
  - ReplaceBLX: {Offset: 0x8802C2, Find: 0x4303F8, Replace: 0x43C900}
    # N3FontTypeController.setupAdvancedOption(...) --> NOP
  - ReplaceBytesNOP: {Offset: 0xA436FA, FindBLX: 0x43DFE4}
  - ReplaceBytesNOP: {Offset: 0xA446A6, FindBLX: 0x43DFE4}
    # Ignore volume language (affects language number 25; ja? zh?)
  - ReplaceBytesNOP: {Offset: 0x69030A, FindBLX: 0x430DA0}
  - ReplaceBytesNOP: {Offset: 0x690310, FindBLX: 0x43889C}
  - ReplaceBytes: {Offset: 0x690314, FindH: 06 46, ReplaceH: 00 26}
  - ReplaceBytesNOP: {Offset: 0x690318, FindBLX: 0x42957C}

# Waiting (GeoffR): ePub fixed/adjustable top/bottom margins

ePub fixed top/bottom margins:
  - Enabled: no
  - PatchGroup: ePub padding-bottom alternatives
  - Description:
      This patch sets the @page margin sizes in epubs to fixed custom values,
      overriding any @page margin set in the book's CSS stylesheet. (But beware
      that some books also set page margins in an XPGT stylesheet which are added
      to any CSS @page margins, and those will not be affected by this patch).
    #      padding-bottom: %1em !important;\n
    # --> }@page{margin:00px 00px 00px}body{
  - FindReplaceString:
      Find: "\x20padding-bottom: %1em !important;\n"
      Replace: "}@page{margin:00px 00px 00px}body{"
    # *** Replacement values start here, don't change anything above ***
  - ReplaceString: {Offset: 0x0E, Find: "00px", Replace: "00px", MustMatchLength: yes} # TOP MARGIN: Replacement value is the margin size (two digits) in pixels:
  - ReplaceString: {Offset: 0x18, Find: "00px", Replace: "00px", MustMatchLength: yes} # BOTTOM MARGIN: Replacement value is the margin size (two digits) in pixels:
    #
    # Minimum LEFT/RIGHT MARGIN: (This margin will overlap the left/right margin
    # set with the adjustment slider, not add to it.) Replacement value is margin
    # size (two digits) in pixels:
  - ReplaceString: {Offset: 0x13, Find: "00px", Replace: "00px", MustMatchLength: yes}

ePub disable built-in body padding-bottom:
  - Enabled: no
  - PatchGroup: ePub padding-bottom alternatives
  - Description: |
      The built-in ePub stylesheet adds a line of padding at the bottom of the
      body element, to prevent the chapter ending on the last line of a page.
      This patch disables that stylesheet entry.
      
      This patch is not compatible with `ePub fixed/adjustable top/bottom margins`
      patch, which already removes this stylesheet entry to make room for other
      things.
    #      padding-bottom: %1em !important;\n
    # -->  _adding-bottom: %1em !important;\n
  - FindBaseAddressString: "\x20padding-bottom: %1em"
  - ReplaceString: {Offset: 1, Find: "p", Replace: "_"}

Custom kepub default margins:
  - Enabled: no
  - Description: |
      Sets the built-in minimum margin for KePub books and Pocket articles to
      zero, the same as it is in ePub books. This only affects left/right margins
      in normal reading mode, but all four margins in full-screen mode.
  - ReplaceInt: {Offset: 0x60F5B4, Find: 60, Replace: 0} # Device = AuraOne, Type = Japanese kepub
  - ReplaceInt: {Offset: 0x60F5B6, Find: 32, Replace: 0} # Device = AuraOne, Type = pocket article or non-Japanese kepub
  - ReplaceInt: {Offset: 0x60F5BA, Find: 20, Replace: 0} # Device = Touch/Mini, Type = Any
  - ReplaceInt: {Offset: 0x60F594, Find: 45, Replace: 0} # Device = Other, Type = Japanese kepub
  - ReplaceInt: {Offset: 0x60F596, Find: 25, Replace: 0} # Device = Other, Type = pocket article or non-Japanese kepub

Block WiFi firmware upgrade:
  - Enabled: no
  - Description: |
      WARNING! THIS IS A DANGEROUS PATCH! READ THE INFORMATION BELOW CAREFULLY!
      
      THIS PATCH IS UNTESTED, as there is no way to be sure it still works until
      the next firmware version is released. If it works then the firmware will
      not be upgraded during a WiFi sync, but you will still be able to upgrade
      manually or by syncing with the Kobo desktop.
      
      THIS PATCH COULD RESULT IN A BOOT LOOP when signing out of your Kobo account
      (Settings > Accounts > Sign out) or when invoking a factory reset from the
      device information menu (Settings > Device information > Factory reset).
      REMOVE THIS PATCH BEFORE USING EITHER OF THOSE OPTIONS.
      A factory reset invoked using the hardware methods (such as holding down the
      light button while switching on) should not be affected.
  - FindReplaceString:
      Find:    "UpgradeCheck/%1/%2/%3/%4/%5"
      Replace: "UpgradeCheck/%1/%2/k/99.9/5"

Custom Sleep/Power-off timeouts:
  - Enabled: no
  - Description: |
      Changes the Sleep/Power-off timeout menu options from 5,10,15,30,45,60
      minutes to 10,20,30,60,120,240 minutes.
    # Values displayed on both menus
  - BaseAddress: 0xD6708C
  - ReplaceString: {Offset: 0, Find: "5 mins\0", Replace: "10 mins"}
  - ReplaceString: {Offset: 8, Find: "10 mins", Replace: "20 mins"}
  - ReplaceString: {Offset: 16, Find: "15 mins", Replace: "30 mins"}
  - ReplaceString: {Offset: 24, Find: "30 mins", Replace: "1 hour"}
  - ReplaceString: {Offset: 32, Find: "45 mins", Replace: "2 hours"}
  - ReplaceString: {Offset: 38, Find: "60 mins", Replace: "4 hours"}
    # Actual values used for sleep menu
  - BaseAddress: 0
  - ReplaceInt: {Offset: 0xAE3560, Find: 5,  Replace: 10}
  - ReplaceInt: {Offset: 0xAE35B8, Find: 10, Replace: 20}
  - ReplaceInt: {Offset: 0xAE35F4, Find: 15, Replace: 30}
  - ReplaceInt: {Offset: 0xAE3630, Find: 30, Replace: 60}
  - ReplaceInt: {Offset: 0xAE366C, Find: 45, Replace: 120}
  - ReplaceInt: {Offset: 0xAE36A8, Find: 60, Replace: 240}
    # Actual values used for power menu
  - ReplaceInt: {Offset: 0xAE3726, Find: 5,  Replace: 10}
  - ReplaceInt: {Offset: 0xAE3762, Find: 10, Replace: 20}
  - ReplaceInt: {Offset: 0xAE379C, Find: 15, Replace: 30}
  - ReplaceInt: {Offset: 0xAE37D6, Find: 30, Replace: 60}
  - ReplaceInt: {Offset: 0xAE3810, Find: 45, Replace: 120}
  - ReplaceInt: {Offset: 0xAE3848, Find: 60, Replace: 240}

Set KePub hyphenation:
  - Enabled: no
  - Description: |
      The built-in KePub stylesheet has a line * { -webkit-hyphens: auto; }
      to turn on hyphenation, but it is only used if the device's justification
      button is set to full justification. With this patch enabled hyphenation
      will always be turned on, regardless of justification button setting.
      
      (The publisher can still turn hyphenation off/on in the book's stylesheet.)
  - ReplaceBytes: {Offset: 0xA3E28C, FindBLX: 0x443954, ReplaceH: 01 20 01 20} # Alternative 1: Always turn KePub hyphenation on
# - ReplaceBytes: {Offset: 0xA3E28C, FindBLX: 0x443954, ReplaceH: 00 20 00 20} # Alternative 2: Never turn KePub hyphenation on

Force user line spacing in KePubs:
  - Enabled: no
  - Description: |
      This patch will allow the line spacing set by the slider to take effect
      in some problem KePub books with fixed linespacing (including ones where the
      publisher has used <div> instead of <p> for paragraphs, or wrapped each
      paragraph in a <span> and set the line-height on the span.) However it might
      also override some line spacing that would better be left fixed, e.g. it can
      cause problems with the spacing of paragraphs that begin with a raise-cap.
    # body, p { line-height: %1 ... }  -->  body *  { line-height: %1 ... }
  - FindBaseAddressString: "body, p { line-height: %1"
  - ReplaceString: {Find: "body, p {", Replace: "body *  {", MustMatchLength: yes}
    #
    # Option: Comment out the replace_string line above and uncomment the one below
    # for a less forceful version of this patch that has fewer side effects and
    # should still work for most problem books, but not the ones where the publisher
    # has set the line-height at <span> level.
    #
    # body, p { line-height: %1 ... }  -->  body,div,p{line-height:%1 ... }
# - ReplaceString: {Find: "body, p { line-height: %", Replace: "body,div,p{line-height:%"}

Force user line spacing in ePubs (part 1 of 2):
  - Enabled: no
  - Description: |
      This is part 1 of 2. Also enable part 2 in librmsdk.so.1.0.0.patch
      This patch prevents any line-height style set in the book's stylesheet from
      being recognised. It will spoil the formatting of some books, but will
      ensure that the line spacing set with the adjustment slider takes effect.
  - FindBaseAddressString: "\0\0\x20line-height: %1"
  - ReplaceString: {Offset: 3, Find: "l", Replace: "_"}

Un-force font-family override p tags (std epubs):
  - Enabled: no
  - PatchGroup: ePub force font alternatives
  - Description: |
      This patch allows the font set for paragraphs by the publisher in the epub
      stylesheet to override the font selected by the reader from the device.
    #     body, p { font-family: -ua-default !important; }
    # --> body    { font-family: -ua-default !important; }
  - FindBaseAddressString: "body, p { font-family: -ua"
  - ReplaceString: {Find: "body, p", Replace: "body  \x20", MustMatchLength: yes}

Force user font-family in ePubs (Part 1 of 2):
  - Enabled: no
  - PatchGroup: ePub force font alternatives
  - Description: |
      This is part 1 of 2. Also enable part 2 in librmsdk.so.1.0.0.yaml.
      This patch prevents any font-family style set in the book's stylesheet from
      being recognised. It might spoil the style of books which use multiple fonts,
      but will ensure that the font-family set from the device menu takes effect.
  - FindBaseAddressString: "font-family: -ua-default; font-style: normal; font-weight: normal;"
  - ReplaceString: {Find: "f", Replace: "_"}
  - FindBaseAddressString: "font-family: -ua-default; font-style: italic; font-weight: normal;"
  - ReplaceString: {Find: "f", Replace: "_"}
  - FindBaseAddressString: "font-family: -ua-default; font-style: italic; font-weight: bold;"
  - ReplaceString: {Find: "f", Replace: "_"}
  - FindBaseAddressString: "font-family: -ua-default; font-style: normal; font-weight: bold;"
  - ReplaceString: {Find: "f", Replace: "_"}
  - FindBaseAddressString: "font-family: -ua-default !important;"
  - ReplaceString: {Find: "f", Replace: "_"}

ePub constant font sharpness:
  - Enabled: no
  - Description: |
      With this patch the ePub reader will use a constant sharpness value of 0.2,
      instead of the value set by the advanced font sharpness/weight slider. The
      slider sharpness values range from -0.4(min.) to 0.2(max.), default -0.0666.
    # -kobo-font-sharpness: %1; --> -kobo-font-sharpness:0.2;
  - FindBaseAddressString: "\0\0 -kobo-font-sharpness: %1;"
  - ReplaceString: {Offset: 3, Find: "-kobo-font-sharpness: %1", Replace: "-kobo-font-sharpness:0.2", MustMatchLength: yes}

KePub constant font sharpness:
  - Enabled: no
  - Description: |
      With this patch the KePub reader will use a constant sharpness value of 0.2,
      instead of the value set by the advanced font sharpness/weight slider. The
      slider sharpness values range from -0.4(min.) to 0.2(max.), default -0.0666.
    #     body { -kobo-font-sharpness: %1; -kobo-font-thickness: %2; }\n
    # --> body{-kobo-font-sharpness:0.0/*%1*/;-kobo-font-thickness:%2}\n
  - FindReplaceString:
      Find:    "body { -kobo-font-sharpness: %1; -kobo-font-thickness: %2; }\n"
      Replace: "body{-kobo-font-sharpness:0.0/*%1*/;-kobo-font-thickness:%2}\n"
      MustMatchLength: yes
  - ReplaceString: 
      Offset: 5 
      Find:    "-kobo-font-sharpness:0.0"
      Replace: "-kobo-font-sharpness:0.2" # Replacement sharpness value
      MustMatchLength: yes

Un-Force user text-align in div,p tags in KePubs:
  - Enabled: no
  - Description: |
      This patch allows the text alignment set by the publisher in the kepub
      stylesheet to override the alignment selected by the reader from the device.
    #     div, p { text-align: %1 !important; }
    # --> body   { text-align: %1 !important; }
  - FindBaseAddressString: "div, p { text-align: %1"
  - ReplaceString: 
      Find:    "div, p {"
      Replace: "body   {"
      MustMatchLength: yes

Un-Force user font-family in KePubs:
  - Enabled: no
  - Description: |
      The KePub reader uses a very heavy-handed method of setting the font selected
      by the user, overriding all fonts set by the publisher in the book unless
      "Publisher Default" is selected.
      This patch lets the font-family set by the publisher in the KePub stylesheet
      override the font-family selected by the reader from the device in some
      cases, which allows a mix of user-selected and publisher-selected fonts.
      Alternatives 1-3 give increasing preference to the publisher-selected fonts.
  - FindBaseAddressString: "* { font-family: %1 !important; }\n"
    #
    # Alternative 1:
    #     * { font-family: %1 !important; }\n
    # --> div,p{font-family:%1!important; }\n
  - ReplaceString:
      Find: "* { font-family: %1 !important; }\n"
      Replace: "div,p{font-family:%1!important; }\n"
      MustMatchLength: yes
    #
    # Alternative 2: (Similar to ePub default)
    #     * { font-family: %1 !important; }\n
    # --> body,p{font-family:%1!important;}\n
# - ReplaceString:
#     Offset: 0
#     Find: "* { font-family: %1 !important; }\n"
#     Replace: "body,p{font-family:%1!important;}\n"
#     MustMatchLength: yes
    #
    # Alternative 3: (similar to ePub with `Un-force font-family override p tags`)
    #     * { font-family: %1 !important; }\n
    # --> body{font-family:%1 !important; }\n
# - ReplaceString:
#     Offset: 0
#     Find: "* { font-family: %1 !important; }\n"
#     Replace: "body{font-family:%1 !important; }\n"
#     MustMatchLength: yes

Un-force link decoration in KePubs:
  - Enabled: no
  - Description: Disables the following link decoration CSS in the KePub stylesheet.
    # a:link, a:visited, a:hover, a:active {
    #   border-bottom: 1px dotted black !important;
    #   color: #696969 !important;
    # }
  - FindBaseAddressString: "a:link, a:visited, a:hover, a:active {"
  - ReplaceString: {Offset: 0x27, Find: "b", Replace: "_"} # Disable border-bottom style
  - ReplaceString: {Offset: 0x53, Find: "c", Replace: "_"} # Disable color style

KePub stylesheet additions:
  - Enabled: no
  - Description: Makes room to add some additional CSS to the default KePub stylesheet.
    # See replacement CSS below for examples.
  - FindBaseAddressString: ".KBHighlighting, .KBSearchResult {"
  - ReplaceString: {Offset: 0x0000, Find: ".KBHighlighting, .KBSearchResult { background-color: #C6C6C6 !important; } \t",                                                                         Replace: ".KBHighlighting,.KBSearchResult{background-color:#C6C6C6!important}.KBSearch", MustMatchLength: yes}
  - ReplaceString: {Offset: 0x004C, Find: ".KBSearchResult, .KBAnnotation, .KBHighlighting { font-size: 100% !important; -webkit-text-combine: inherit !important; } \t",                          Replace: "Result,.KBAnnotation,.KBHighlighting{font-size:100%!important;-webkit-text-combine:inherit!important}.KBAnnotation[writingM", MustMatchLength: yes}
  - ReplaceString: {Offset: 0x00C7, Find: ".KBAnnotation[writingMode=\"horizontal-tb\"], .KBAnnotationContinued[writingMode=\"horizontal-tb\"] { border-bottom: 2px solid black !important; } \t", Replace: "ode=\"horizontal-tb\"],.KBAnnotationContinued[writingMode=\"horizontal-tb\"]{border-bottom:2px solid black!important}.KBAnnotation[writingMode=\"vert", MustMatchLength: yes}
  - ReplaceString: {Offset: 0x0157, Find: ".KBAnnotation[writingMode=\"vertical-rl\"], .KBAnnotationContinued[writingMode=\"vertical-rl\"] { border-right: 2px solid black !important; } \t",      Replace: "ical-rl\"],.KBAnnotationContinued[writingMode=\"vertical-rl\"]{border-right:2px solid black!important}.KBAnnotation[writingMode=\"vertical-lr\"]", MustMatchLength: yes}
  - ReplaceString: {Offset: 0x01E2, Find: ".KBAnnotation[writingMode=\"vertical-lr\"], .KBAnnotationContinued[writingMode=\"vertical-lr\"] { border-left: 2px solid black !important; }",          Replace: ",.KBAnnotationContinued[writingMode=\"vertical-lr\"]{border-left:2px solid black!important}/*********************************************/", MustMatchLength: yes}
    #
    # Replacement value: CSS string of exactly 47 characters in length:
    #
    # Example 1: Make full justification the default:
# - ReplaceString: {Offset: 0x023B, Find: "/*********************************************/", Replace: "body{text-align:justify                       }", MustMatchLength: yes}
    #
    # Example 2: text-rendering:optimizeSpeed: Disables kerning, but fixes some
    # rendering problems that affect fully justified text.
# - ReplaceString: {Offset: 0x023B, Find: "/*********************************************/", Replace: "body{text-rendering:optimizeSpeed             }", MustMatchLength: yes}
    #
    # Example 3: text-rendering:optimizeLegibility: Enables ligatures, but causes
    # some additional rendering problems for fully justified text.
# - ReplaceString: {Offset: 0x023B, Find: "/*********************************************/", Replace: "body{text-rendering:optimizeLegibility        }", MustMatchLength: yes}
    #
    # Example 4: Make KePub font sizes match ePub font sizes: ePubs render with
    # 1.5 times the font size of KePubs by default. With this enabled they match.
# - ReplaceString: {Offset: 0x023B, Find: "/*********************************************/", Replace: "#book-inner{font-size:1.5em                   }", MustMatchLength: yes}

Change dicthtml strings to micthtml:
  - Enabled: no
  - Description: |
      This patch is used for something to do with syncing and custom dictionaries.
      If you don't know what it does, then you probably don't need it.
  - ReplaceString: {Offset: 0xCFD0DC, Find: "%1/dicthtml%2", Replace: "%1/micthtml%2"}
  - ReplaceString: {Offset: 0xCFD0EC, Find: "dicthtml", Replace: "micthtml"}
  - ReplaceString: {Offset: 0xCFD134, Find: "/mnt/onboard/.kobo/dict/dicthtml%1", Replace: "/mnt/onboard/.kobo/dict/micthtml%1"}

Allow searches on Extra dictionaries:
  - Enabled: no
    ## To allow searches on Extra dictionaries change space character at end of
    ## "Extra: " to another char (ex: "Extra:_")
    ## The space char causes a non-desired "English - English" when searching on
    ## Extra dictionary from main menu.
  - FindBaseAddressString: "\0Extra:\x20"
  - ReplaceString: {Offset: 7, Find: "\x20", Replace: "_"}

Ignore .otf fonts:
  - Enabled: no
  - Description:
      Ignores all sideloaded and pre-installed .otf fonts.
      (Currently the only pre-installed .otf font is OpenDyslexic.)
      Embedded .otf fonts should continue to work as normal.
  - FindReplaceString: {Find: "*.otf", Replace: "_.otf"}

ePub uniform font scale:
  - Enabled: no
  - Description: |
      This patch makes the ePub reader use the same font scale on all devices,
      the same as the KePub reader does. Without this patch the ePub reader uses
      a 50% larger font size on AuraHD/H2O/GloHD/Clara (and Aura?) devices.
  - FindBaseAddressHex: 00 00 C0 42 00 00 10 43
  - ReplaceBytes: {Offset: 6, FindH: 10 43, ReplaceH: C0 42}

Set font scale factor:
  - Enabled: no
  - Description: |
      This patch sets the font scale factor for ePub and KePub readers.
      See also `ePub uniform font scale` and `Custom font sizes` patches.
  # Font scale factor is calculated as (font size slider) / (X+32)
  # Original value X=14, so original scale factor is (font size slider) / 46.
  # Allowed replacement values for X: 0-15 (smaller X --> larger scale factor)
  # ePub:
  - ReplaceInt: {Offset: 0x4AF9E2, Find: 14, Replace: 8}
  # KePub:
  - ReplaceInt: {Offset: 0xA3DE6C, Find: 14, Replace: 8}

# Waiting (GeoffR): Keyboard template (Mini/Touch/Glo/Aura)
# Waiting (GeoffR): Keyboard template (AuraHD/H2O)
# Waiting (GeoffR): Keyboard template (GloHD/ClaraHD/AuraOne/H2O2)
# Waiting (GeoffR): Cyrillic keyboard (Mini/Touch/Glo/Aura/AuraHD/H2O)
# Waiting (GeoffR): Cyrillic Keyboard (GloHD/ClaraHD/AuraOne/H2O2)
# Waiting (GeoffR): Arabic keyboard (Mini/Touch/Glo/Aura/AuraHD/H2O)
# Waiting (GeoffR): Hebrew keyboard (Mini/Touch/Glo/Aura)
# Waiting (GeoffR): Hebrew keyboard (AuraHD/H2O)
# Waiting (GeoffR): Hebrew keyboard (GloHD/ClaraHD/AuraOne/H2O2)
# Waiting (GeoffR): Greek Keyboard (GloHD/ClaraHD/AuraOne/H2O2)

# The following patch(es) were made by jackie_w

Dictionary text font-family/font-size/line-height:
  - Enabled: no
  - Description: |
      See https://www.mobileread.com/forums/showpost.php?p=3521137&postcount=48
      This patch allows you to to customise the appearance of the text 
      in the dictionary pop-up widget and full-screen dictionary page.

      You can change one or more of the following attributes
      - font-family
      - font-size
      - line-height

      These are the Kobo defaults
                Glo - Georgia  23px  1.4em
                H2O - Georgia  29px  1.4em
              GloHD - Georgia  32px  1.4em
            AuraONE - Georgia  42px  1.4em

      fw 4.17 - improved to also reduce the blank lines displayed in many 
                sideloaded custom dictionaries which contain <blockquote>.
                See (link TBA) for screenshots
  #
  # Stage 1: Change DictionaryView to remove %variables
  # from:
  #    * { font: %1px %2; line-height: %5em; }
  #    div.descriptionFont { font-family: %3; }
  #    ol { font-size: %1px; font-weight: bold; margin-left: %4em; margin-top: 0px; }
  #    ol p { font-size: %1px; font-weight:normal; }
  # to:
  #    * { font-size: %1px; line-height: 1.40em;font-family: Georgia                      ;}
  
  #    ol {margin-left:1em; margin-top:0}
  #    blockquote {margin:0.3em 0 0.3em 1em} blockquote>blockquote {margin:-0.3em 0 0 2em}
  #
  # ##### N.B. Do not change the next 4 lines #####
  - FindReplaceString:
      Find:    "* { font: %1px %2; line-height: %5em; }\ndiv.descriptionFont { font-family: %3; }\nol { font-size: %1px; font-weight: bold; margin-left: %4em; margin-top: 0px; }\nol p { font-size: %1px; font-weight:normal; }\n"
      Replace: "* { font-size: %1px; line-height: 1.40em;font-family: Georgia                      ;}\n\nol {margin-left:1em; margin-top:0}\nblockquote {margin:0.3em 0 0.3em 1em} blockquote>blockquote {margin:-0.3em 0 0 2em}\n"
      MustMatchLength: yes
  # ##### N.B. Do not change anything above this line #####
  #
  # Stage 2: N.B. You MUST keep old and new strings EXACTLY the same length
  # Un-comment ONE ONLY of the following replace_string examples 
  #   to change dictionary font-family from default Georgia:
  #   - to a different built-in font
  #   - to one of your sideloaded custom fonts
  #
  # Notes for changing font-family:
  #   1.  Pad the shorter of the old/new strings with spaces to 
  #       keep same length for both strings (see examples below)
  #
  #   2.  If the new font-family name (max. 29 chars) contains any spaces it 
  #       should be wrapped in 'single quotes' (see examples 2, 3)
  #
  #   3.  To change from Georgia to the Kobo default sans-serif font, Avenir, 
  #       use either one of the following to achieve the same result:
  #       - sans-serif
  #       - 'Avenir Next Medium'
  # 
  # Examples for customising font-family:
# - ReplaceString: {Offset: 54, Find: "Georgia   ", Replace: "sans-serif", MustMatchLength: yes}
# - ReplaceString: {Offset: 54, Find: "Georgia    ", Replace: "'Gill Sans'", MustMatchLength: yes}
# - ReplaceString: {Offset: 54, Find: "Georgia      ", Replace: "'Kobo Nickel'", MustMatchLength: yes}
# - ReplaceString: {Offset: 54, Find: "Georgia ", Replace: "Bookerly", MustMatchLength: yes}
  #
  # Un-comment and edit next line to change font-size
# - ReplaceString: {Offset: 15, Find: "%1px", Replace: "32px", MustMatchLength: yes}
  #
  # Un-comment and edit next line to change line spacing
# - ReplaceString: {Offset: 34, Find: "1.40em", Replace: "1.30em", MustMatchLength: yes}

Custom header/footer page number text:
  - Enabled: no
  - Description: Changes the page number text format in the reading header & footer
  - FindReplaceString: {Find: "%1 OF %2", Replace: "%1 / %2"}

# The following patch(es) are ported from jcn363's patches

Dictionary, remove long winded closest match notification:
  - Enabled: no
  - Description: |
      Idea by pakoe
      cf. https://www.mobileread.com/forums/showpost.php?p=3043631&postcount=111
  - FindReplaceString:
        Find:    "Your search for &ldquo;%1&rdquo; did not match any words in the dictionary. The closest match was &ldquo;%2&rdquo;."
        Replace: "No match for &ldquo;%1&rdquo;, closest match was &ldquo;%2&rdquo;."

Wikipedia Search language:
  - Enabled: no
  - Description: |
      The patch set the search language in Wikipedia.
      Replace the "en" (in both the replace_string lines) to language code you want.
      For example English is "en" (set as default), for German is "de", for Russian is "ru".
  - FindReplaceString: 
      Find:    "\0https://%1.m.wikipedia.org/wiki/Special:Search\0"
      Replace: "\0https://es.m.wikipedia.org/wiki/Special:Search\0"
  - FindReplaceString: 
      Find:    "\0https://%1.wikipedia.org/wiki/Special:Search\0"
      Replace: "\0https://es.wikipedia.org/wiki/Special:Search\0"

