Add orientation dropdown to developer options on all devices:
  - Enabled: no
  - Description: |
      Developer Options (search devmodeon, then go to Device Information) has a section with a dropdown
      allowing changing the rotation to all options, including the inverted ones. This patch shows it on
      devices without a sensor. DOES NOT STICK.
  # In N3SettingsDeveloperOptionsView::N3SettingsDeveloperOptionsView(QWidget*):
  # replace the call to Device::hasOrientationSensor() to MOV r0, #0x1
  - ReplaceBytes: {Offset: 0xA6F504, FindH: AA F5 9C E6, ReplaceH: 4F F0 01 00}
  # TODO: update offset

Old kepub fullscreen mode:
  - Enabled: no
  - Description: |
      Emulates the old kepub fullscreen mode. TODO - replace the show title toggle, adjustable margins.
  # In KepubBookReader::setFullScreen():
  # replace the BNE to the part which hides header/footer (or else shows) with a B.
  # The KepubBookReader::hideHeaderAndFooter() call is the same which is used when displaying
  # covers. This allows the content to go right to the top/bottom of the screen (and QuickTurn
  # still works)!
  - ReplaceBytes: {Offset: 0x9E45B4, FindH: 56 D1, ReplaceH: 56 E0}
  # Note for updating: D1 to E0 are all that needs changing, as the opcode for b (1101) and cond
  # are the first 8 bytes (swapped to last for thumb).

Replace sleepcover setting with screenshots:
  - Enabled: no
  - Description: |
      Replaces the sleepcover setting with a toggle to enable/disable screenshots. Note that due to limitations in
      the way I am patching this, the sleepcover will be enabled/disabled along with this too (or use the patch below
      to override it). I'll try to figure out a better way to do this later (maybe try putting some code in an empty
      part of the binary?).
  # In PowerKeyFilter::filter(QObject*, KeyEvent*):
  # replace the BL call to the subroutine which loads the Screenshots setting with a BLX to
  # PowerSettings::getSleepAccessoryEnabled():
  # Note: When updating, make sure the subroutine still does the same thing.
# - ReplaceBytes: {Offset: 0x96C764, FindH: DF F4 C4 FE, ReplaceBLX: 0x4101F4}
  - ReplaceBytes: {Offset: 0x96C764, FindH: DF F4 C4 FE, ReplaceH: A3 F6 46 E5} # TODO: why does this always seem to be true?
  # then change the title in the power settings page:
  - FindReplaceString: {Find: "SLEEPCOVER", Replace: "SCREENSHOT"}
  # and the label:
  - FindReplaceString: {Find: "Automatically sleep and wake up:", Replace: "Take screenshots:"}
  # and the description:
  - FindReplaceString: {Find: "The Kobo SleepCover (sold separately) automatically puts your eReader to sleep when you close it and wakes it up when you open it.", Replace: "The power button is able to take screenshots when you press it instead of sleeping."}

Set sleepcover enabled:
  - Enabled: no
  - Description: |
      Overrides the sleepcover setting. This is only meant to be used with `Replace sleepcover setting with screenshots`.
  # In the subroutine where the hall (magnet) sensor is instantiated:
  # change PowerSettings::getSleepAccessoryEnabled() (to override [PowerSettings] -> SleepAccessoryEnabled)
  - ReplaceBytes: {Offset: 0x963B8A, FindBLX: 0x4101F4, ReplaceH: 4F F0 01 00}
  - ReplaceBytes: {Offset: 0x963B8C, FindH: 01, ReplaceH: 01} # 00 to disable

Enable OverDrive:
  - Enabled: yes
  - ReplaceBytesAtSymbol: {Symbol: "OverDriveCardManager::isOverDriveEnabled()", Offset: 123, FindH: 4F F0 00 08, ReplaceH: 4F F0 01 08}

Show time in footer:
  - Enabled: yes
  - Description: |
      Shows the reading time in the footer instead of Page %1 <i>of</i> %1.
  # In ReadingView::onFooterEvent:
  # sacrifice the non book-based progress in the page number view
  # for getting the time instead
  # NOP the code:
  - ReplaceBytes: {Offset: 0x9DF2C6, FindBLX: 0x423878, ReplaceH: 00 46 00 46}  # int r0 = ReadingView::currentPage(r0)
  - ReplaceBytes: {Offset: 0x9DF2CA, FindH: 82 46, ReplaceH: 00 46}             # int r10 = r0
  - ReplaceBytes: {Offset: 0x9DF2CC, FindH: 20 46, ReplaceH: 00 46}             # ReadingView r0 = r4 (this)
  - ReplaceBytes: {Offset: 0x9DF2CE, FindBLX: 0x419FD0, ReplaceH: 00 46 00 46}  # int r0 = ReadingView::totalPages(r0)
  - ReplaceBytes: {Offset: 0x9DF2D2, FindH: 83 46, ReplaceH: 00 46}             # int r11 = r0
  - ReplaceBytes: {Offset: 0x9DF2D4, FindH: D4 F8 88 00, ReplaceH: 00 46 00 46} # BookProgressType r0 = *(r1 + 0x88)
  - ReplaceBytes: {Offset: 0x9DF2D8, FindBLX: 0x41BB38, ReplaceH: 00 46 00 46}  # bool r0 = progressTypeIsBookBased(r0)
  - ReplaceBytes: {Offset: 0x9DF2DC, FindH: 58 B3, ReplaceH: 00 46}             # if (!r0) goto ###
    # afterwards is the code which loads the arguments for ReadingFooter::update and calls it (r10 is arg3, r11 is arg4, if not, below needs to be updated)
  # New code:
# - ReplaceBytes: {Offset: 0x9DF2C6, FindH: 00 46 00 46, ReplaceBLX: 0x3FFE28}
  - ReplaceBytes: {Offset: 0x9DF2C6, FindH: 00 46 00 46, ReplaceH: 20 F6 B0 E5} # QTime r0 = QTime::currentTime()
  - ReplaceBytes: {Offset: 0x9DF2CA, FindH: 00 46, ReplaceH: 83 46}             # QTime r11 = r0
  
  # TESTING: fix to 1 and 24
  - ReplaceBytes: {Offset: 0x9DF2CC, FindH: 00 46 00 46, ReplaceH: 4FF0010A}
  - ReplaceBytes: {Offset: 0x9DF2D0, FindH: 00 46 00 46, ReplaceH: 4FF0180B}

  # TODO: why does this segfault?
## - ReplaceBytes: {Offset: 0x9DF2CC, FindH: 00 46 00 46, ReplaceBLX: 0x428358}
#  - ReplaceBytes: {Offset: 0x9DF2CC, FindH: 00 46 00 46, ReplaceH: 49 F6 44 E0} # int r0 = QTime::hour(r0)
#  - ReplaceBytes: {Offset: 0x9DF2D0, FindH: 00 46, ReplaceH: 82 46}             # int r10 = r0
#  - ReplaceBytes: {Offset: 0x9DF2D2, FindH: 00 46, ReplaceH: 58 46}             # QTime r0 = r11
## - ReplaceBytes: {Offset: 0x9DF2D4, FindH: 00 46 00 46, ReplaceBLX: 0x41E298}
#  - ReplaceBytes: {Offset: 0x9DF2D4, FindH: 00 46 00 46, ReplaceH: 3E F6 E0 E7} # int r0 = QTime::minute(r0)
#  - ReplaceBytes: {Offset: 0x9DF2D8, FindH: 00 46, ReplaceH: 83 46}             # int r11 = r0

  # and now make it show %1:%2 instead of Page %1 <i>of</i> %1 (loaded to the var from ReadingFooter::ReadingFooter):
# TODO
